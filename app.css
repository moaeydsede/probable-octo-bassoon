/* ====== Base ====== */
:root{
  --bg:#0b1220;
  --panel:#0f1a2e;
  --card:#111f37;
  --text:#e8eefc;
  --muted:#a8b3d1;
  --primary:#4f8cff;
  --danger:#ff4d4d;
  --border:rgba(255,255,255,.10);
  --shadow: 0 14px 40px rgba(0,0,0,.35);
  --radius:18px;
  --radius2:24px;
  --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Kufi Arabic", "Noto Sans Arabic", sans-serif;
  background: radial-gradient(1200px 800px at 10% 10%, #1a2a4b 0%, var(--bg) 55%) fixed;
  color:var(--text);
}
.hidden{display:none !important}
.muted{color:var(--muted)}
.small{font-size:.9rem}
.mt{margin-top:14px}
.ta-left{text-align:left}

/* Buttons */
.btn{
  border:1px solid var(--border);
  background: rgba(255,255,255,.05);
  color:var(--text);
  padding:10px 14px;
  border-radius:14px;
  cursor:pointer;
  transition: transform .08s ease, background .15s ease, border-color .15s ease;
  font-weight:650;
}
.btn:hover{background: rgba(255,255,255,.08)}
.btn:active{transform: translateY(1px)}
.btn.primary{
  background: linear-gradient(135deg, rgba(79,140,255,.9), rgba(79,140,255,.55));
  border-color: rgba(79,140,255,.55);
}
.btn.primary:hover{background: linear-gradient(135deg, rgba(79,140,255,1), rgba(79,140,255,.65))}
.btn.danger{
  background: linear-gradient(135deg, rgba(255,77,77,.9), rgba(255,77,77,.55));
  border-color: rgba(255,77,77,.55);
}
.btn.ghost{background: transparent;}
.icon-btn{
  border:1px solid var(--border);
  background: rgba(255,255,255,.04);
  color:var(--text);
  width:42px;height:42px;
  border-radius:14px;
  cursor:pointer;
}
.icon-btn:hover{background: rgba(255,255,255,.08)}
.search{
  width:100%;
  border:1px solid var(--border);
  background: rgba(255,255,255,.04);
  color:var(--text);
  padding:12px 14px;
  border-radius:14px;
  outline:none;
}
.search::placeholder{color: rgba(232,238,252,.55)}

/* Login */
.login{
  min-height:100%;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:18px;
}
.login-card{
  width:min(520px, 100%);
  background: rgba(17,31,55,.75);
  border:1px solid var(--border);
  border-radius: var(--radius2);
  box-shadow: var(--shadow);
  overflow:hidden;
}
.brand{
  display:flex;
  gap:14px;
  padding:22px 22px 12px;
  align-items:center;
}
.logo{
  width:54px;height:54px;
  border-radius:18px;
  background: linear-gradient(135deg, rgba(79,140,255,1), rgba(79,140,255,.35));
  display:grid;
  place-items:center;
  font-weight:900;
  letter-spacing:.5px;
}
.login-card h1{margin:0 0 4px 0; font-size:1.4rem}
.login-form{
  padding: 6px 22px 22px;
  display:grid;
  gap:10px;
}
.login-form label{font-size:.95rem; color:var(--muted); font-weight:650}
.login-form input{
  border:1px solid var(--border);
  background: rgba(255,255,255,.04);
  color:var(--text);
  padding:12px 14px;
  border-radius:14px;
  outline:none;
}
.login-form input:focus{border-color: rgba(79,140,255,.7)}
.help{display:grid; gap:8px; margin-top:8px}
.pill{
  display:inline-block;
  padding:10px 12px;
  border-radius:14px;
  background: rgba(255,255,255,.05);
  border:1px dashed rgba(255,255,255,.18);
}
.login-footer{
  padding:14px 22px 18px;
  border-top:1px solid var(--border);
  background: rgba(0,0,0,.12);
}

/* App Layout */
.topbar{
  position:sticky; top:0; z-index:10;
  background: rgba(11,18,32,.85);
  backdrop-filter: blur(10px);
  border-bottom:1px solid var(--border);
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:10px 12px;
  gap:10px;
}
.topbar-left{display:flex; align-items:center; gap:10px}
.topbar-title .title{font-weight:900}
.topbar-title .subtitle{color:var(--muted); font-size:.9rem}
.hamburger{
  display:block;
  width:18px;height:2px;
  background: var(--text);
  position:relative;
  border-radius:10px;
}
.hamburger::before,.hamburger::after{
  content:"";
  position:absolute;
  left:0;
  width:18px;height:2px;
  background: var(--text);
  border-radius:10px;
}
.hamburger::before{top:-6px}
.hamburger::after{top:6px}

.layout{
  display:grid;
  grid-template-columns: 290px 1fr;
  min-height: calc(100vh - 66px);
}
.sidebar{
  border-left:1px solid var(--border);
  background: rgba(15,26,46,.6);
  backdrop-filter: blur(10px);
  padding:14px;
  display:flex;
  flex-direction:column;
  gap:14px;
}
.sidebar-head{
  display:flex;
  align-items:center;
  gap:12px;
  padding:12px;
  border:1px solid var(--border);
  border-radius:18px;
  background: rgba(255,255,255,.03);
}
.avatar{
  width:48px;height:48px;
  border-radius:16px;
  background: rgba(79,140,255,.25);
  border:1px solid rgba(79,140,255,.35);
  display:grid;
  place-items:center;
  font-weight:900;
}
.sidebar-user{font-weight:850}
.sidebar-foot{margin-top:auto; padding:10px 12px; border-top:1px dashed rgba(255,255,255,.15)}
.nav{display:grid; gap:8px}
.nav a{
  text-decoration:none;
  color:var(--text);
  padding:12px 12px;
  border-radius:16px;
  border:1px solid transparent;
  background: rgba(255,255,255,.02);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.nav a:hover{background: rgba(255,255,255,.05)}
.nav a.active{
  background: rgba(79,140,255,.15);
  border-color: rgba(79,140,255,.35);
}
.nav .badge{
  font-size:.82rem;
  padding:4px 10px;
  border-radius:999px;
  border:1px solid var(--border);
  color:var(--muted);
}

/* Main */
.main{padding: 16px;}
.view{max-width: 1200px; margin: 0 auto;}
.pagehead{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  margin: 8px 0 14px;
}
.pagehead h2{margin:0; font-size:1.35rem}
.actions{display:flex; gap:10px; flex-wrap:wrap}
.card{
  background: rgba(17,31,55,.70);
  border:1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: 0 12px 36px rgba(0,0,0,.22);
  padding: 14px;
}
.card-title{color:var(--muted); font-weight:750}
.card-value{font-size:1.9rem; font-weight:950; margin-top:6px}
.card-value.small{font-size:1.05rem; font-weight:800}
.grid{display:grid; gap:12px}
.grid.cards{grid-template-columns: repeat(4, minmax(0,1fr))}
.grid.two{grid-template-columns: repeat(2, minmax(0,1fr))}
.list{display:grid; gap:10px; margin-top:10px}
.list .row{
  padding:10px 12px;
  border:1px solid var(--border);
  border-radius:16px;
  background: rgba(255,255,255,.03);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.list .row .mono{font-family: var(--mono); color:var(--muted); font-size:.9rem}
.toolbar{
  display:flex;
  gap:10px;
  align-items:center;
  flex-wrap:wrap;
  margin-bottom: 10px;
}
.toolbar.row{justify-content:flex-start}
.field-inline{display:grid; gap:6px}
.field-inline input, .field-inline select{
  border:1px solid var(--border);
  background: rgba(255,255,255,.04);
  color:var(--text);
  padding:10px 12px;
  border-radius:14px;
  outline:none;
  min-width: 170px;
}
.form-grid{
  display:grid;
  grid-template-columns: repeat(2, minmax(0,1fr));
  gap:12px;
}
.field{display:grid; gap:8px}
.field label{color:var(--muted); font-weight:650}
.field input, .field select, .field textarea{
  border:1px solid var(--border);
  background: rgba(255,255,255,.04);
  color:var(--text);
  padding:12px 14px;
  border-radius:14px;
  outline:none;
}
.field textarea{min-height:90px; resize:vertical}
.table-wrap{
  overflow:auto;
  border:1px solid var(--border);
  border-radius: 18px;
  background: rgba(17,31,55,.55);
}
.table{
  width:100%;
  border-collapse: collapse;
  min-width: 720px;
}
.table thead th{
  position:sticky; top:0;
  background: rgba(11,18,32,.9);
  border-bottom:1px solid var(--border);
  padding:12px 10px;
  text-align:right;
  font-size:.92rem;
  color:var(--muted);
}
.table tbody td{
  border-bottom:1px solid rgba(255,255,255,.08);
  padding:12px 10px;
  vertical-align:middle;
}
.table tbody tr:hover{background: rgba(255,255,255,.03)}
.chips{display:flex; gap:8px; flex-wrap:wrap}
.chip{
  padding:6px 10px;
  border-radius: 999px;
  border:1px solid var(--border);
  background: rgba(255,255,255,.03);
  font-size:.85rem;
  color:var(--muted);
}

/* Modal */
.modal{
  position:fixed; inset:0;
  background: rgba(0,0,0,.55);
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 18px;
  z-index: 30;
}
.modal-card{
  width:min(720px, 100%);
  background: rgba(15,26,46,.92);
  border:1px solid var(--border);
  border-radius: 22px;
  box-shadow: var(--shadow);
  overflow:hidden;
}
.modal-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding: 14px 14px;
  border-bottom:1px solid var(--border);
}
.modal-head h3{margin:0; font-size:1.1rem}
.modal-body{padding: 14px}
.modal-foot{
  padding: 12px 14px 16px;
  border-top:1px solid var(--border);
  display:flex;
  gap:10px;
  justify-content:flex-start;
  flex-wrap:wrap;
}

/* Toast */
.toast{
  position: fixed;
  left: 16px;
  bottom: 16px;
  background: rgba(15,26,46,.92);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 12px 14px;
  box-shadow: var(--shadow);
  z-index: 40;
  max-width: min(520px, calc(100% - 32px));
}

/* Responsive */
@media (max-width: 980px){
  .layout{grid-template-columns: 1fr}
  .sidebar{
    position: fixed;
    top: 66px;
    right: 0;
    width: 300px;
    height: calc(100vh - 66px);
    transform: translateX(110%);
    transition: transform .18s ease;
    z-index: 20;
    border-left:none;
    border-right:1px solid var(--border);
  }
  .sidebar.open{transform: translateX(0)}
  .grid.cards{grid-template-columns: repeat(2, minmax(0,1fr))}
  .grid.two{grid-template-columns: 1fr}
  .form-grid{grid-template-columns: 1fr}
  .topbar-right{gap:8px}
  .topbar-right .btn{padding:10px 10px}
}
@media (max-width: 420px){
  .grid.cards{grid-template-columns: 1fr}
}


/* Extra polish */
.topbar-right{flex-wrap:wrap}
.table .mono{font-family: var(--mono)}
select{font-family: inherit}


/* ===========================
   AMEEN 9 STYLE THEME (v3)
   - Classic desktop-ish look
   - Compact grids + beveled buttons
=========================== */

:root{
  --bg: #e9edf3;
  --panel: #ffffff;
  --panel2:#f7f9fc;
  --ink:#0b1220;
  --muted:#5c6a7a;
  --line: rgba(0,0,0,.16);
  --line2: rgba(0,0,0,.10);
  --brand1:#123a7a;
  --brand2:#0b2b5c;
  --accent:#1b5cff;
  --danger:#d92d20;
  --ok:#039855;
}

body{
  background: radial-gradient(1200px 600px at 10% 0%, #f6f8fc, var(--bg));
  color: var(--ink);
}

/* Topbar like desktop ERP */
.topbar{
  background: linear-gradient(180deg, var(--brand1), var(--brand2));
  border-bottom: 1px solid rgba(255,255,255,.14);
}
.topbar .title{ color:#fff; font-weight:800; letter-spacing:.2px }
.topbar .subtitle{ color:rgba(255,255,255,.75) }
.icon-btn{ background: rgba(255,255,255,.10); border: 1px solid rgba(255,255,255,.18) }
.icon-btn:hover{ background: rgba(255,255,255,.16) }

/* Module bar (classic) */
.modulebar{
  display:flex; gap:8px; flex-wrap:wrap;
  padding:10px 12px;
  background: linear-gradient(180deg, #f7f9ff, #eef2f9);
  border-bottom: 1px solid var(--line2);
}
.mbtn{
  appearance:none; border:1px solid var(--line);
  background: linear-gradient(180deg, #ffffff, #eef2f9);
  border-radius: 10px;
  padding:8px 12px;
  font-weight:700;
  cursor:pointer;
  box-shadow: 0 1px 0 rgba(255,255,255,.9) inset;
}
.mbtn:hover{ filter:brightness(0.99) }
.mbtn:active{ transform: translateY(1px) }

/* Sidebar: tree-like */
.sidebar{
  background: linear-gradient(180deg, #ffffff, #f2f6fd);
  border-left: 1px solid var(--line2);
}
.sidebar-head{
  background: linear-gradient(180deg, #f7f9ff, #eef2f9);
  border-bottom: 1px solid var(--line2);
}
.nav .group{
  margin:10px 10px 0;
  border:1px solid var(--line2);
  border-radius: 14px;
  overflow:hidden;
  background:#fff;
}
.nav .ghead{
  display:flex; align-items:center; justify-content:space-between;
  padding:10px 12px;
  background: linear-gradient(180deg, #f8fbff, #eef4ff);
  cursor:pointer;
  user-select:none;
  font-weight:800;
}
.nav .ghead .car{ opacity:.7; font-size:12px }
.nav .gbody{ padding:8px; display:grid; gap:6px }
.nav a{
  border:1px solid var(--line2);
  background: linear-gradient(180deg, #fff, #f6f8fc);
  border-radius: 12px;
  padding:10px 10px;
}
.nav a.active{
  border-color: rgba(27,92,255,.35);
  background: linear-gradient(180deg, #f2f6ff, #e8efff);
}
.badge{
  background: rgba(27,92,255,.12);
  border: 1px solid rgba(27,92,255,.25);
  color: var(--accent);
}

/* Main content panels like windows */
.main{
  background: transparent;
}
.card{
  border:1px solid var(--line2);
  background: linear-gradient(180deg, #ffffff, #fbfcff);
  box-shadow: 0 10px 26px rgba(13,38,76,.06);
}
.card-title{
  font-weight:900;
  padding:12px 12px 0;
}
.kpi{
  border:1px solid var(--line2);
  background: linear-gradient(180deg, #ffffff, #f5f8ff);
}

/* Tables: compact */
.table th{
  background: linear-gradient(180deg, #f8fbff, #eef4ff);
  font-weight:900;
}
.table td, .table th{ padding:10px 10px }
.table tbody tr:hover{ background:#f6f8ff }

/* Buttons: beveled */
.btn{
  border: 1px solid var(--line);
  background: linear-gradient(180deg, #ffffff, #eef2f9);
  box-shadow: 0 1px 0 rgba(255,255,255,.9) inset;
  font-weight:800;
}
.btn.primary{
  border-color: rgba(27,92,255,.35);
  background: linear-gradient(180deg, #2b66ff, #1749c8);
  color:#fff;
}
.btn.ghost{
  background: rgba(255,255,255,.12);
  border-color: rgba(255,255,255,.18);
  color:#fff;
}
.btn.danger{
  border-color: rgba(217,45,32,.35);
  background: linear-gradient(180deg, #ff5a4c, #c81e1e);
  color:#fff;
}

/* Login: classic */
.login{
  background: radial-gradient(900px 500px at 20% 0%, #2b66ff22, transparent),
              radial-gradient(900px 500px at 80% 20%, #123a7a22, transparent),
              linear-gradient(180deg, #f8fbff, #e9edf3);
}
.login-card{
  border:1px solid var(--line2);
  background: linear-gradient(180deg, #ffffff, #f3f6fb);
  box-shadow: 0 24px 60px rgba(13,38,76,.14);
}
.logo.ameen{
  background: linear-gradient(180deg, #2b66ff, #123a7a);
  border: 1px solid rgba(255,255,255,.22);
}

/* Make everything still mobile-friendly */
@media (max-width: 980px){
  .modulebar{ position: sticky; top: 56px; z-index: 20 }
}


/* ===========================
   RESPONSIVE "APP-LIKE" LAYER (v4)
   - Mobile: bottom tab bar, drawer sidebar, full-height
   - Desktop: classic ERP windows
=========================== */

html, body{ height:100%; }
body{ -webkit-tap-highlight-color: transparent; }

.layout{ min-height: calc(100vh - 56px); }

/* Bottom bar hidden by default (desktop) */
.bottombar{
  display:none;
  position:fixed;
  right:0; left:0; bottom:0;
  padding:10px 10px calc(10px + env(safe-area-inset-bottom));
  background: linear-gradient(180deg, rgba(248,251,255,.92), rgba(233,237,243,.96));
  backdrop-filter: blur(10px);
  border-top: 1px solid rgba(0,0,0,.12);
  z-index: 60;
  gap:8px;
}
.bbtn{
  flex:1;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  gap:4px;
  border:1px solid rgba(0,0,0,.14);
  background: linear-gradient(180deg, #ffffff, #eef2f9);
  border-radius: 14px;
  padding:10px 6px;
  font-weight:900;
  cursor:pointer;
}
.bbtn .bi{ font-size:18px; line-height:1; }
.bbtn .bt{ font-size:12px; line-height:1; }
.bbtn.active{
  border-color: rgba(27,92,255,.35);
  background: linear-gradient(180deg, #f2f6ff, #e8efff);
}

/* Mobile behaviour */
@media (max-width: 980px){
  /* App-like */
  body{
    background: linear-gradient(180deg, #f8fbff, #e9edf3);
  }
  .modulebar{ display:none; } /* use bottom tabs on mobile */
  .bottombar{ display:flex; }

  /* Make main content not hidden by bottom bar */
  .main{
    padding-bottom: 92px;
  }

  /* Drawer sidebar */
  .sidebar{
    position: fixed;
    top: 56px;
    bottom: 0;
    width: min(86vw, 360px);
    right: -400px;
    transition: right .22s ease;
    z-index: 70;
    box-shadow: 0 18px 50px rgba(13,38,76,.20);
    border-left: 1px solid rgba(0,0,0,.10);
  }
  .sidebar.open{ right: 0; }

  /* Dim overlay when sidebar open */
  .drawer-dim{
    display:none;
    position:fixed;
    inset:56px 0 0 0;
    background: rgba(2,6,23,.35);
    z-index: 65;
  }
  .drawer-dim.show{ display:block; }

  /* Topbar compact */
  .topbar{ position: sticky; top:0; z-index: 80; }
  .topbar .subtitle{ display:none; }
  .topbar .title{ font-size:14px; }

  /* Cards full width & comfy */
  .grid{ grid-template-columns: 1fr !important; }
  .kpi{ padding:12px; }
  .card{ border-radius: 18px; }
  .table-wrap{ border-radius: 18px; }

  /* Bigger touch targets */
  input, select, button{ min-height: 44px; }
  .btn{ padding:10px 12px; border-radius: 14px; }
}

/* Desktop refinements */
@media (min-width: 981px){
  .main{ padding-bottom: 18px; }
}

.mbtn.active{ border-color: rgba(27,92,255,.35); background: linear-gradient(180deg, #f2f6ff, #e8efff); }

/* Company logo preview */
.logo-preview{
  margin-top:10px;
  display:none;
  align-items:center;
  justify-content:flex-start;
}
.logo-preview img{
  width:96px;
  height:96px;
  border-radius:18px;
  border:1px solid rgba(0,0,0,.12);
  background:#fff;
  object-fit:contain;
  padding:8px;
}


/* ===========================
   MOBILE DOCK (Ameen-like)
=========================== */
.mobile-dock{
  display:none;
  position:fixed;
  left:0; right:0; bottom:0;
  padding:16px 14px calc(18px + env(safe-area-inset-bottom));
  background: radial-gradient(1000px 420px at 50% 0%, rgba(27,92,255,.10), transparent),
              linear-gradient(180deg, rgba(7,14,27,.96), rgba(10,18,34,.98));
  border-top: 1px solid rgba(255,255,255,.12);
  z-index: 90;
}
.dock-scroll{
  display:flex;
  gap:14px;
  overflow:auto;
  -webkit-overflow-scrolling: touch;
  padding:2px 2px 12px;
  scroll-snap-type: x mandatory;
}
.dock-scroll::-webkit-scrollbar{ height: 6px; }
.dock-scroll::-webkit-scrollbar-thumb{ background: rgba(255,255,255,.18); border-radius: 99px; }
.dock-item{
  flex: 0 0 auto;
  width: 132px;
  height: 96px;
  scroll-snap-align: start;
  border: 1px solid rgba(255,255,255,.12);
  background: radial-gradient(140px 80px at 50% 10%, rgba(255,255,255,.10), transparent),
              linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  border-radius: 22px;
  padding: 10px 12px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:10px;
  box-shadow: 0 18px 40px rgba(0,0,0,.28);
  cursor:pointer;
}
.dock-item:active{ transform: translateY(1px); }
.dock-ico{ font-size: 34px; line-height:1; filter: drop-shadow(0 8px 10px rgba(0,0,0,.25)); }
.dock-txt{ color: rgba(255,255,255,.92); font-weight: 900; font-size: 16px; letter-spacing: .2px; }

.dock-item.glow{
  border-color: rgba(83,222,195,.55);
  box-shadow: 0 18px 45px rgba(0,0,0,.30), 0 0 0 2px rgba(83,222,195,.10);
}

.dock-indicator{
  margin: 10px auto 0;
  width: 140px;
  height: 6px;
  border-radius: 999px;
  background: rgba(255,255,255,.28);
}

/* Enable dock on mobile */
@media (max-width: 980px){
  .mobile-dock{ display:block; }
  .main{ padding-bottom: 170px; } /* avoid overlap */
}

/* Hide previous bottom bar if any leftover */
.bottombar{ display:none !important; }


/* ===========================
   MOBILE PRO LAYER (v7)
   - Bottom-sheet modal
   - Better spacing & touch
   - Cleaner typography
=========================== */

@media (max-width: 980px){
  :root{
    --radiusM: 22px;
  }

  body{
    font-family: system-ui, -apple-system, "Segoe UI", Arial, "Noto Kufi Arabic", sans-serif;
  }

  /* App-like layout */
  .layout{ display:block; }
  .sidebar{ top:56px; border-top-left-radius: 22px; }
  .topbar{
    height:56px;
    padding: 10px 10px;
  }
  .topbar .title{ font-size:15px; }
  .icon-btn{ border-radius: 16px; width:44px; height:44px; }

  /* Cards */
  .main{ padding: 12px 12px 190px; }
  .card{ border-radius: var(--radiusM); }
  .card-title{ font-size: 16px; }
  .kpi{ border-radius: 18px; }

  /* Forms */
  .field label{ font-weight: 900; }
  input, select, textarea{
    border-radius: 16px !important;
    border: 1px solid rgba(0,0,0,.12) !important;
    padding: 12px 12px !important;
    font-size: 16px !important; /* prevents iOS zoom */
    background: #fff;
  }
  .btn{ border-radius: 16px; }
  .btn.primary{ box-shadow: 0 10px 24px rgba(27,92,255,.22); }
  .btn.danger{ box-shadow: 0 10px 24px rgba(217,45,32,.18); }

  /* Tables: keep scroll but softer container */
  .table-wrap{
    border-radius: var(--radiusM);
    border: 1px solid rgba(0,0,0,.10);
    box-shadow: 0 14px 30px rgba(13,38,76,.07);
  }
  .table th{
    position: sticky;
    top: 0;
    z-index: 2;
  }

  /* Modal becomes bottom-sheet */
  #modal{
    align-items: flex-end !important;
    padding: 10px !important;
  }
  #modal .modal-card{
    width: 100% !important;
    max-width: 100% !important;
    max-height: 92vh !important;
    border-radius: 26px 26px 18px 18px !important;
    overflow: hidden !important;
    box-shadow: 0 30px 80px rgba(2,6,23,.35) !important;
  }
  #modal .modal-head{
    padding: 14px 14px 10px !important;
    background: linear-gradient(180deg, #ffffff, #f4f7ff) !important;
  }
  #modalTitle{ font-size: 16px !important; font-weight: 1000 !important; }
  #modal .modal-body{
    padding: 12px 14px 14px !important;
    overflow: auto !important;
    -webkit-overflow-scrolling: touch;
  }
  #modal .modal-foot{
    padding: 12px 14px calc(12px + env(safe-area-inset-bottom)) !important;
    background: linear-gradient(180deg, rgba(248,251,255,.95), rgba(233,237,243,.98)) !important;
    border-top: 1px solid rgba(0,0,0,.08);
    position: sticky;
    bottom: 0;
  }

  /* Subtle tap feedback */
  .btn, .dock-item, .nav a, .icon-btn{
    transition: transform .08s ease, filter .15s ease;
  }
  .btn:active, .dock-item:active, .nav a:active, .icon-btn:active{
    transform: scale(.99);
    filter: brightness(.98);
  }

  /* Mobile dock: make more premium */
  .mobile-dock{
    padding: 14px 12px calc(16px + env(safe-area-inset-bottom));
  }
  .dock-item{
    width: 140px;
    height: 100px;
    border-radius: 24px;
    border: 1px solid rgba(255,255,255,.14);
    background: radial-gradient(160px 90px at 50% 0%, rgba(255,255,255,.12), transparent),
                linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.03));
  }
  .dock-ico{ font-size: 36px; }
  .dock-txt{ font-size: 15px; }
  .dock-indicator{ width: 160px; height: 6px; background: rgba(255,255,255,.22); }
}


/* =======================
   PWA + Desktop polish
======================= */
:root{ --safe-top: env(safe-area-inset-top); --safe-bottom: env(safe-area-inset-bottom); }
body{ -webkit-tap-highlight-color: transparent; overscroll-behavior: none; }
.topbar{ padding-top: calc(10px + var(--safe-top)); }
.mobile-dock{ padding-bottom: calc(10px + var(--safe-bottom)); }

@media (min-width: 981px){
  body{ background: radial-gradient(1200px 600px at 80% 10%, rgba(27,92,255,.10), transparent 60%), radial-gradient(900px 500px at 10% 90%, rgba(17,185,129,.10), transparent 60%), #0b1220; }
  .app{ max-width: 1280px; margin: 18px auto; border-radius: 18px; overflow: clip; box-shadow: 0 24px 60px rgba(0,0,0,.45); }
  .layout{ min-height: calc(100vh - 36px); }
  .sidebar{ border-radius: 0; }
}


/* ===========================
   Mobile document cards
=========================== */
.mobile-cards{ display:none; }
.doc-card{
  border:1px solid rgba(0,0,0,.10);
  border-radius: 20px;
  padding: 12px 12px;
  background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.92));
  box-shadow: 0 14px 30px rgba(13,38,76,.07);
  margin-bottom: 10px;
}
.doc-head{ display:flex; align-items:flex-start; justify-content:space-between; gap:10px; }
.doc-no{ font-weight: 1000; letter-spacing: .4px; }
.doc-date{ font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; font-size: 12px; color: rgba(0,0,0,.55); }
.doc-party{ font-weight: 900; margin-top: 4px; }
.doc-meta{ display:flex; gap:10px; flex-wrap:wrap; margin-top: 8px; color: rgba(0,0,0,.72); font-size: 13px; }
.doc-meta .pill{ background: rgba(27,92,255,.08); border:1px solid rgba(27,92,255,.12); padding: 6px 10px; border-radius: 999px; }
.doc-actions{ display:flex; gap:8px; flex-wrap:wrap; margin-top: 10px; justify-content:flex-end; }
.doc-actions .btn{ padding: 9px 10px; }

@media (max-width: 980px){
  /* On mobile, show cards + keep table scroll as optional */
  .mobile-cards{ display:block; }
  .table-wrap{ display:none; }
  /* Keep table-wrap visible inside modal or explicit cards */
  #modal .table-wrap{ display:block; }
  #view_moves .table-wrap, #view_stocktake .table-wrap, #view_gl .table-wrap, #view_statement .table-wrap, #view_tb .table-wrap, #view_balances .table-wrap, #view_cogs .table-wrap { display:block; }
}


body.logged-out .mobile-dock{ display:none !important; }


/* Prevent mobile dock from covering bottom-sheet modal */
body.modal-open .mobile-dock{
  display:none !important;
}

/* Voucher multi-lines */
.v-lines{display:flex; flex-direction:column; gap:10px; margin-top:10px}
.v-line{background:rgba(255,255,255,0.04); border:1px solid rgba(255,255,255,0.10); border-radius:14px; padding:12px}
.v-line .field{margin-bottom:8px}
.v-line-actions{display:flex; justify-content:flex-end; margin-top:8px}
